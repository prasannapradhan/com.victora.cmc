<mvc:View
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:table="sap.ui.table"
    xmlns:l="sap.ui.layout"
    controllerName="com.victora.cmc.uix.controller.MeterialListing"
>
    <App>
        <Page title="Duplicate Material Groups">
            <content>
                <VBox>
                    <!-- Enhanced Toolbar -->
                    <Toolbar class="sapUiSmallMarginBottom sapUiResponsivePadding sapUiTinyMarginTop sapUiTinyMarginBegin sapUiTinyMarginEnd">
                        <!-- Filter Dropdown -->
                        <Select
                            id="typeFilterSelect"
                            width="12rem"
                            change="onFilterChange"
                            class="sapUiSmallMarginEnd"
                            items="{
                                path: 'vcfg>/availableTypes',
                                templateShareable: false
                            }">
                            <core:Item key="{vcfg>}" text="{
                                path: 'vcfg>',
                                formatter: '.formatTypeText'
                            }"/>
                        </Select>
                        <!-- Group Count -->
                        <ObjectStatus
                            class="sapUiTinyMarginEnd"
                            text="{vcfg>/groupCountText}"
                            state="Warning"
                            inverted="true"
                        />

                        <!-- Material Count -->
                        <ObjectStatus
                            class="sapUiTinyMarginEnd"
                            text="{vcfg>/materialCountText}"
                            state="Warning"
                            inverted="true"
                        />

                        <!-- Threshold Input -->
                        <Text text="Similarity"  class="sapUiTinyMarginEnd" />
                        <Input
                            width="4rem"
                            value="{vcfg>/threshold}"
                            type="Text"
                            placeholder="Threshold"
                            class="sapUiTinyMarginEnd"
                            change="handleMaterialThresholdChange"
                            textAlign="Center"
                        />

                        <!-- Apply Button -->
                        <Button
                            text="Apply"
                            press="handleMaterialThresholdChange"
                            type="Emphasized"
                            class="sapUiTinyMarginEnd" 
                        />

                        <!-- Spacer -->
                        <ToolbarSpacer />

                        <!-- Download All Button -->
                        <HBox alignItems="Center" 
                            class="sapUiResponsivePadding sapUiTinyMargin">
                            <!-- Download All Button -->
                            <Button
                                icon="sap-icon://download"
                                text="Download All"
                                press="downloadAllMaterials"
                                type="Emphasized"
                                class="sapUiSmallMarginEnd"
                            />
                        
                            <!-- Download Group Button -->
                            <Button
                                icon="sap-icon://download"
                                text="Download Group"
                                press=".downloadGroupMaterials"
                                type="Emphasized"
                                class="sapUiSmallMarginEnd"
                            />
                            <MenuButton
                            id="navDropdownMaterial"
                            icon="sap-icon://switch-views"
                            text="Go to"
                            type="Transparent"
                            class="sapUiSmallMarginEnd customNavButton">
                            <menu>
                                <Menu>
                                    <MenuItem 
                                        text="Customer" 
                                        icon="sap-icon://customer"
                                        press="onCustomerPage"/>
                                    <MenuItem 
                                        text="Vendor" 
                                        icon="sap-icon://supplier"
                                        press="onVendorPage"/>
                                </Menu>
                            </menu>
                        </MenuButton>
                    </HBox>
                    </Toolbar>

                    <!-- FlexBox for List and Table -->
                    <FlexBox
                        direction="Row"
                        justifyContent="Start"
                        fitContainer="true"
                    >
                        <!-- Suspect List -->
                        <ScrollContainer
                            width="auto"
                            height="85vh"
                            vertical="true"
                        >
                            <List
                                id="suspectListUnique"
                                items="{cmc>/suspects}"
                                mode="SingleSelectMaster"
                                selectionChange="onSelectionChange"
                                growing="false"
                            >
                                <StandardListItem title="{cmc>displayKey}" />
                            </List>
                        </ScrollContainer>

                        <!-- Suspect Details Table -->
                        <table:Table
                            id="suspectDetailsTableUnique"
                            rows="{details>/selectedSuspects}"
                            selectionMode="None"
                            width="auto"
                        >
                            <table:columns>
                                <table:Column width="6rem">
                                    <Label text="Match Group" />
                                    <table:template>
                                        <l:HorizontalLayout>
                                            <l:content>
                                                <Text
                                                    text="{details>MatchGroup}"
                                                    class="boldText"
                                                    visible="{= !${details>Duplicate}}"
                                                />
                                                <ObjectStatus
                                                    class="sapUiSmallPadding sapUiSmallMargin"
                                                    text="{details>MatchGroup}"
                                                    state="Success"
                                                    visible="{= ${details>Duplicate}}"
                                                    inverted="true"
                                                />
                                            </l:content>
                                        </l:HorizontalLayout>
                                    </table:template>
                                </table:Column>

                                <table:Column width="auto">
                                    <Label text="Description" />
                                    <table:template>
                                        <Text text="{details>Description}" />
                                    </table:template>
                                </table:Column>

                                <table:Column width="8rem">
                                    <Label text="Material ID" />
                                    <table:template>
                                        <Text text="{details>Number}" />
                                    </table:template>
                                </table:Column>

                                <table:Column width="18rem">
                                    <Label text="Type" />
                                    <table:template>
                                        <Text text="{details>Type}" />
                                    </table:template>
                                </table:Column>
                            </table:columns>
                        </table:Table>
                    </FlexBox>
                </VBox>
            </content>
        </Page>
    </App>
</mvc:View>